"use strict";function auth(o){o.use(session({store:new MongoStore({url:config_1.config.mongoStore.url}),secret:config_1.config.mongoStore.secret,resave:!0,rolling:!0,saveUninitialized:!1,cookie:{maxAge:2592e5}})),o.use(passport.initialize()),o.use(passport.session()),passport.serializeUser(function(o,e){e(null,o._id)}),passport.deserializeUser(function(o,e){mongo_1.db.getUserByID(o).then(function(o){e(null,o)}).catch(function(o){e(o,null)})}),passport.use("userEnter",new passport_local_1.Strategy(function(o,e,s){mongo_1.db.getUserByName(o).then(function(o){o&&e==o.password?s(null,o):s(null,!1)}).catch(function(o){s(o,null)})}))}exports.__esModule=!0;var passport_local_1=require("passport-local"),passport=require("passport"),session=require("express-session"),connect_mongo=require("connect-mongo"),mongo_1=require("./mongo"),config_1=require("../config"),MongoStore=connect_mongo(session);exports.auth=auth;